import sys
bram_cells = {
    'dut/apb_rom/ram/ram_reg':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'28',
        'LOC':'RAMB36_X8Y39',
        'NAME':'dut/apb_rom/ram/ram_reg',
        'PARENT':'dut/apb_rom/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'72',
        'READ_WIDTH_B':'0',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'10240',
        'RTL_RAM_NAME':'apb_rom/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'READ_FIRST',
        'WRITE_WIDTH_A':'0',
        'WRITE_WIDTH_B':'72',
        'bram_addr_begin':'0',
        'bram_addr_end':'511',
        'bram_slice_begin':'0',
        'bram_slice_end':'39',
        'ram_addr_begin':'0',
        'ram_addr_end':'511',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'39',
    },
    'dut/ftb_debug/display/ram/ram_reg_bram_0':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X8Y35',
        'NAME':'dut/ftb_debug/display/ram/ram_reg_bram_0',
        'PARENT':'dut/ftb_debug/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'0',
        'bram_addr_end':'4095',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'0',
        'ram_addr_end':'4095',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_debug/display/ram/ram_reg_bram_1':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X8Y36',
        'NAME':'dut/ftb_debug/display/ram/ram_reg_bram_1',
        'PARENT':'dut/ftb_debug/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'4096',
        'bram_addr_end':'8191',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'4096',
        'ram_addr_end':'8191',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_debug/display/ram/ram_reg_bram_2':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X8Y37',
        'NAME':'dut/ftb_debug/display/ram/ram_reg_bram_2',
        'PARENT':'dut/ftb_debug/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'8192',
        'bram_addr_end':'12287',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'8192',
        'ram_addr_end':'12287',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_debug/display/ram/ram_reg_bram_3':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X8Y38',
        'NAME':'dut/ftb_debug/display/ram/ram_reg_bram_3',
        'PARENT':'dut/ftb_debug/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'12288',
        'bram_addr_end':'16383',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'12288',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_vga/display/ram/ram_reg_bram_0':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X7Y36',
        'NAME':'dut/ftb_vga/display/ram/ram_reg_bram_0',
        'PARENT':'dut/ftb_vga/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'0',
        'bram_addr_end':'4095',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'0',
        'ram_addr_end':'4095',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_vga/display/ram/ram_reg_bram_1':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X7Y37',
        'NAME':'dut/ftb_vga/display/ram/ram_reg_bram_1',
        'PARENT':'dut/ftb_vga/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'4096',
        'bram_addr_end':'8191',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'4096',
        'ram_addr_end':'8191',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_vga/display/ram/ram_reg_bram_2':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X7Y38',
        'NAME':'dut/ftb_vga/display/ram/ram_reg_bram_2',
        'PARENT':'dut/ftb_vga/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'8192',
        'bram_addr_end':'12287',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'8192',
        'ram_addr_end':'12287',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/ftb_vga/display/ram/ram_reg_bram_3':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'88',
        'LOC':'RAMB36_X7Y39',
        'NAME':'dut/ftb_vga/display/ram/ram_reg_bram_3',
        'PARENT':'dut/ftb_vga/display/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'131072',
        'RTL_RAM_NAME':'display/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'NO_CHANGE',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'12288',
        'bram_addr_end':'16383',
        'bram_slice_begin':'0',
        'bram_slice_end':'7',
        'ram_addr_begin':'12288',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'7',
    },
    'dut/riscv/mem/ram/ram_reg_bram_0':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y40',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_0',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'0',
        'bram_addr_end':'2047',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'0',
        'ram_addr_end':'2047',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_1':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y41',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_1',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'2048',
        'bram_addr_end':'4095',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'2048',
        'ram_addr_end':'4095',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_10':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y42',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_10',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'8192',
        'bram_addr_end':'12287',
        'bram_slice_begin':'18',
        'bram_slice_end':'26',
        'ram_addr_begin':'8192',
        'ram_addr_end':'12287',
        'ram_offset':'0',
        'ram_slice_begin':'18',
        'ram_slice_end':'26',
    },
    'dut/riscv/mem/ram/ram_reg_bram_11':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y43',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_11',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'12288',
        'bram_addr_end':'16383',
        'bram_slice_begin':'18',
        'bram_slice_end':'26',
        'ram_addr_begin':'12288',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'18',
        'ram_slice_end':'26',
    },
    'dut/riscv/mem/ram/ram_reg_bram_12':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y44',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_12',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'4',
        'READ_WIDTH_B':'4',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'4',
        'WRITE_WIDTH_B':'4',
        'bram_addr_begin':'0',
        'bram_addr_end':'8191',
        'bram_slice_begin':'27',
        'bram_slice_end':'30',
        'ram_addr_begin':'0',
        'ram_addr_end':'8191',
        'ram_offset':'0',
        'ram_slice_begin':'27',
        'ram_slice_end':'30',
    },
    'dut/riscv/mem/ram/ram_reg_bram_13':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y45',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_13',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'4',
        'READ_WIDTH_B':'4',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'4',
        'WRITE_WIDTH_B':'4',
        'bram_addr_begin':'8192',
        'bram_addr_end':'16383',
        'bram_slice_begin':'27',
        'bram_slice_end':'30',
        'ram_addr_begin':'8192',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'27',
        'ram_slice_end':'30',
    },
    'dut/riscv/mem/ram/ram_reg_bram_14':{
        'BEL':'RAMB180.RAMB18E2_L',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB18_X9Y92',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_14',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB18E2',
        'READ_WIDTH_A':'1',
        'READ_WIDTH_B':'1',
        'REF_NAME':'RAMB18E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'1',
        'WRITE_WIDTH_B':'1',
        'bram_addr_begin':'0',
        'bram_addr_end':'16383',
        'bram_slice_begin':'31',
        'bram_slice_end':'31',
        'ram_addr_begin':'0',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'31',
        'ram_slice_end':'31',
    },
    'dut/riscv/mem/ram/ram_reg_bram_2':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y42',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_2',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'4096',
        'bram_addr_end':'6143',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'4096',
        'ram_addr_end':'6143',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_3':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y43',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_3',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'6144',
        'bram_addr_end':'8191',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'6144',
        'ram_addr_end':'8191',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_4':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y44',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_4',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'8192',
        'bram_addr_end':'10239',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'8192',
        'ram_addr_end':'10239',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_5':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y45',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_5',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'10240',
        'bram_addr_end':'12287',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'10240',
        'ram_addr_end':'12287',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_6':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y46',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_6',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'12288',
        'bram_addr_end':'14335',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'12288',
        'ram_addr_end':'14335',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_7':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X8Y47',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_7',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'18',
        'READ_WIDTH_B':'18',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'18',
        'WRITE_WIDTH_B':'18',
        'bram_addr_begin':'14336',
        'bram_addr_end':'16383',
        'bram_slice_begin':'0',
        'bram_slice_end':'17',
        'ram_addr_begin':'14336',
        'ram_addr_end':'16383',
        'ram_offset':'0',
        'ram_slice_begin':'0',
        'ram_slice_end':'17',
    },
    'dut/riscv/mem/ram/ram_reg_bram_8':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y40',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_8',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'0',
        'bram_addr_end':'4095',
        'bram_slice_begin':'18',
        'bram_slice_end':'26',
        'ram_addr_begin':'0',
        'ram_addr_end':'4095',
        'ram_offset':'0',
        'ram_slice_begin':'18',
        'ram_slice_end':'26',
    },
    'dut/riscv/mem/ram/ram_reg_bram_9':{
        'BEL':'RAMB36.RAMB36E2',
        'FILE_NAME':'/git/atcf_fpga/rtl/xilinx/srams.v',
        'LINE_NUMBER':'63',
        'LOC':'RAMB36_X9Y41',
        'NAME':'dut/riscv/mem/ram/ram_reg_bram_9',
        'PARENT':'dut/riscv/mem/ram',
        'PRIMITIVE_TYPE':'BLOCKRAM.BRAM.RAMB36E2',
        'READ_WIDTH_A':'9',
        'READ_WIDTH_B':'9',
        'REF_NAME':'RAMB36E2',
        'RTL_RAM_BITS':'524288',
        'RTL_RAM_NAME':'mem/ram/ram',
        'STATUS':'PLACED',
        'WRITE_MODE_A':'READ_FIRST',
        'WRITE_MODE_B':'WRITE_FIRST',
        'WRITE_WIDTH_A':'9',
        'WRITE_WIDTH_B':'9',
        'bram_addr_begin':'4096',
        'bram_addr_end':'8191',
        'bram_slice_begin':'18',
        'bram_slice_end':'26',
        'ram_addr_begin':'4096',
        'ram_addr_end':'8191',
        'ram_offset':'0',
        'ram_slice_begin':'18',
        'ram_slice_end':'26',
    },
}

class bram:
    mem_types = {'RAMB36E2':'RAMB32',
                 'RAMB18E2':'RAMB32', # Will this work?!
                }
    def __init__(self, name, bram_dict):
        self.name = name
        self.parent = bram_dict['PARENT']
        self.bel    = bram_dict['BEL']
        self.loc    = bram_dict['LOC'].split('_')[1]
        # addresses and lsb/msb are inclusive
        self.addr_begin = int(bram_dict['ram_addr_begin'])
        self.addr_end   = int(bram_dict['ram_addr_end'])
        self.lsb        = int(bram_dict['ram_slice_begin'])
        self.msb        = int(bram_dict['ram_slice_end'])
        self.mem_type   = self.mem_types[bram_dict['REF_NAME']]
        pass
    def generate_mmi(self, output):
        output('<BusBlock>')
        output('<BitLane MemType="%s" Placement="%s">'%(self.mem_type, self.loc))
        output('<DataWidth MSB="%d" LSB="%d"/>'%(self.msb, self.lsb))
        output('<AddressRange Begin="%d" End="%d"/>'%(self.addr_begin, self.addr_end))
        output('<Parity ON="false" NumBits="0"/>')
        output('</BitLane>')
        output('</BusBlock>')

class sram:
    def __init__(self, path):
        self.path = path
        self.brams = {}
        self.address_min = None # inclusive
        self.address_max = None # inclusive
        self.msb = None
        self.lsb = None
        pass
    def add_bram(self, bram):
        if bram.parent != self.path:
            print >>sys.stderr, "Skipping %s as it has the wrong parent"%bram.name
            return
        self.brams[bram.name] = bram
        if (self.address_min is None) or (bram.addr_begin < self.address_min):
            self.address_min = bram.addr_begin
            pass
        if (self.address_max is None) or (bram.addr_end > self.address_max):
            self.address_max = bram.addr_end
            pass
        if (self.lsb is None) or (bram.lsb < self.lsb):
            self.lsb = bram.lsb
            pass
        if (self.msb is None) or (bram.msb > self.msb):
            self.msb = bram.msb
            pass
        pass
    def generate_mmi(self, output, inst_path, address_space, part):
        # inst_path = dut/riscv
        # address_space = riscv
        # part = xcvu095-ffva2104-2-e
        output('<?xml version="1.0" encoding="UTF-8"?>')
        output('<MemInfo Version="1" Minor="0">')
        output('<Processor Endianness="Little" InstPath="%s">'%(inst_path))
        output('<AddressSpace Name="%s" Begin="%d" End="%d">'%(address_space, self.address_min, self.address_max+1))
        for bram_name in self.brams:
            self.brams[bram_name].generate_mmi(output)
            pass
        output('</AddressSpace>')
        output('</Processor>')
        output('  <Config>')
        output('    <Option Name="Part" Val="%s"/>'%part)
        output('</Config>')
        output('  <DRC>')
        output('    <Rule Name="RDADDRCHANGE" Val="false"/>')
        output('</DRC>')
        output('</MemInfo>')

brams = {}
for (name,bram_dict) in bram_cells.iteritems():
    brams[name] = bram(name, bram_dict)
    pass

rv_mem = sram("dut/riscv/mem/ram")
for (name,bram) in brams.iteritems():
    rv_mem.add_bram(bram)
    pass
def output(s): print s
rv_mem.generate_mmi(output=output, inst_path='dut/riscv', address_space='riscv', part='xcvu095-ffva2104-2-e')

# updatemem --meminfo top_level.mmi --data fred.mem --bit vivado_output/vcu108_riscv.bit --proc dut/riscv --out new.bit
# updatemem --meminfo riscv.mmi --data fred.mem --bit vivado_output/vcu108_riscv.bit --proc dut/riscv --out new.bit
